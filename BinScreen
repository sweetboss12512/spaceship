local Screen = GetPartFromPort(1,"Screen")
local ResetPort = GetPort(3)

local ResourceTable = {}

local labelProperties = {
	TextScaled = true,
	Text = "",
	Font = Enum.Font.SciFi,
	BackgroundColor3 = Color3.fromRGB(17, 17, 17),
	TextColor3 = Color3.fromRGB(255, 255, 255),
	BorderColor3 = Color3.fromRGB(0, 0, 255),
	BorderSizePixel = 5
}

local gridProperties = {
	SortOrder = Enum.SortOrder.Name,
	FillDirection = Enum.FillDirection.Horizontal,
	StartCorner = Enum.StartCorner.TopLeft,
	HorizontalAlignment = Enum.HorizontalAlignment.Center,
	VerticalAlignment = Enum.VerticalAlignment.Top,
	CellPadding = UDim2.new(.1, 1, .1, 1),
	CellSize = UDim2.new(0,100,0,100)
}

local onCooldown = false

function setupScreen()
	Screen:ClearElements()
	local frame = Screen:CreateElement("ScrollingFrame", {
		BackgroundTransparency = 1,
		AnchorPoint = Vector2.new(.5, .5),
		Position = UDim2.new(.5, 0, .5, 0),
		Size = UDim2.new(0, 400, 0, 400)
	})

	local gridLayout = Screen:CreateElement("UIGridLayout", gridProperties)
	frame:AddChild(gridLayout)

	return frame
end

function addLabel()
	local label = Screen:CreateElement("TextLabel", labelProperties)

	return label
end

function insertResources()
	table.clear(ResourceTable)
	local Bins = GetPartsFromPort(2,"Bin")

	for _, bin in pairs(Bins) do
		if ResourceTable[bin:GetResource()] then
			ResourceTable[bin:GetResource()] += bin:GetAmount()
		else
			ResourceTable[bin:GetResource()] = bin:GetAmount()
		end
	end
end

function typingEffect(label,text)
	for i = 1,#text,1 do
		label.Text = string.sub(text, 1, i)
		Beep()
		wait(.035)
	end
end

ResetPort:Connect("Triggered", function()
	if not onCooldown then
		onCooldown = true
		
		local mainFrame = setupScreen()
		task.wait(.5)
		for resource, resourceNum in pairs(ResourceTable) do
			local label = addLabel()
			mainFrame:AddChild(label)
			typingEffect(label,resource..": "..resourceNum)
		end
		task.wait(.5)
		onCooldown = false
	end
end)
